(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{349:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"移动端h5的屏幕适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移动端h5的屏幕适配","aria-hidden":"true"}},[t._v("#")]),t._v(" 移动端H5的屏幕适配")]),t._v(" "),a("p",[t._v("作者：何志勇")]),t._v(" "),a("h2",{attrs:{id:"一、相关概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、相关概念","aria-hidden":"true"}},[t._v("#")]),t._v(" 一、相关概念")]),t._v(" "),a("h3",{attrs:{id:"_1-1-屏幕相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-屏幕相关","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1 屏幕相关")]),t._v(" "),a("h4",{attrs:{id:"屏幕尺寸（单位：英寸）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#屏幕尺寸（单位：英寸）","aria-hidden":"true"}},[t._v("#")]),t._v(" 屏幕尺寸（单位：英寸）")]),t._v(" "),a("ul",[a("li",[t._v("计算方式：测量屏幕对角线的长度，以1英寸 = 2.54 厘米进行转化。")]),a("li",[t._v("发展趋势：从初代iPhone3.5英寸开始，屏幕尺寸越来越大，到达5寸以上成为主流，单手握持已较为困难；然后全面屏封装工艺的进步，成功跨越6英寸；未来柔性屏幕普及使得更大的手持屏幕成为可能。")])]),t._v(" "),a("h4",{attrs:{id:"屏幕分辨率"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#屏幕分辨率","aria-hidden":"true"}},[t._v("#")]),t._v(" 屏幕分辨率")]),t._v(" "),a("ul",[a("li",[t._v("概念：指屏幕硬件实际由多少个"),a("code",[t._v("物理像素点")]),t._v("（真实的物理单元）组成")]),a("li",[t._v("计算方式：以水平乘以垂直像素数来计算，常用分辨率1280x720(720p)、1920x1080(1080p，通常所说的高清屏),屏幕横向像素达到2048以上通常成为2K,4096以上称为4K。")]),a("li",[t._v("发展趋势：目前中低端机型主流仍是1080p屏幕，旗舰手机分辨率主流是2K屏幕。")])]),t._v(" "),a("h4",{attrs:{id:"像素密度-ppi-pixel-per-inch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#像素密度-ppi-pixel-per-inch","aria-hidden":"true"}},[t._v("#")]),t._v(" 像素密度(PPI: Pixel Per Inch)")]),t._v(" "),a("ul",[a("li",[t._v("概念：指每英寸包括的像素数，是衡量屏幕的清晰度或者图片质量的参数")]),a("li",[t._v("计算方式："),a("img",{staticStyle:{"max-width":"600px",width:"337px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867742-a7f40ff9-6f98-4b3e-a157-72678a56fe7c.png#align=left&display=inline&height=106&originHeight=106&originWidth=337&size=0&status=done&width=337"}}),t._v("。")]),a("li",[t._v("说明：ppi在120-160之间的手机被归为低密度手机，160-240被归为中密度，240-320被归为高密度，320以上被归为超高密度（例如苹果公司的"),a("code",[t._v("Retina屏幕")]),t._v("）,例如"),a("code",[t._v("iPhone 6")]),t._v("的"),a("code",[t._v("PPI")]),t._v("为 326，它每英寸约含有326个"),a("code",[t._v("物理像素点")]),t._v("。 "),a("br"),a("img",{staticStyle:{"max-width":"600px",width:"228px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867749-0d2cd2b0-94c6-420d-8a56-fb06fb99ed35.png#align=left&display=inline&height=75&originHeight=75&originWidth=228&size=0&status=done&width=228"}})])]),t._v(" "),a("h3",{attrs:{id:"_1-2-像素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-像素","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2 像素")]),t._v(" "),a("h4",{attrs:{id:"设备像素（device-pixel）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设备像素（device-pixel）","aria-hidden":"true"}},[t._v("#")]),t._v(" 设备像素（Device Pixel）")]),t._v(" "),a("p",[a("code",[t._v("设备像素")]),t._v("也称"),a("code",[t._v("物理像素")]),t._v("，是屏幕硬件设备能控制显示的最小单位,操作系统可以为每个"),a("code",[t._v("物理像素")]),t._v("自己的颜色和亮度，每个"),a("code",[t._v("物理像素")]),t._v("的大小是屏幕固有的属性，屏幕出厂以后就不会改变了。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"611px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867770-a290890c-3b5b-4586-a6bf-edd746b404ce.png#align=left&display=inline&height=448&originHeight=448&originWidth=611&size=0&status=done&width=611"}})]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"312px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/jpeg/173824/1559292867764-1a657fc3-4ea7-4d5a-8f7e-f7f08b5e7bcb.jpeg#align=left&display=inline&height=234&originHeight=234&originWidth=312&size=0&status=done&width=312"}})]),t._v(" "),a("h4",{attrs:{id:"设备独立像素（device-independent-pixel）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设备独立像素（device-independent-pixel）","aria-hidden":"true"}},[t._v("#")]),t._v(" 设备独立像素（Device Independent Pixel）")]),t._v(" "),a("p",[a("code",[t._v("设备独立像素")]),t._v("是操作系统定义的一种像素单位，也称"),a("code",[t._v("逻辑像素")]),t._v("。操作系统在屏幕屏幕硬件支持基础上，通过设备独立像素调节最佳的显示比例。")]),a("p",[t._v("在PC端，几乎所有的图形化操作系统都支持手动调整"),a("code",[t._v("逻辑像素")]),t._v("。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1336px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867785-9580a625-07dc-4c91-b1aa-ba4fab13c056.png#align=left&display=inline&height=1000&originHeight=1000&originWidth=1336&size=0&status=done&width=1336"}})]),a("p",[t._v("但在移动端，我们很少关注到相关设置项，其实是因为只是使用了"),a("code",[t._v("Android")]),t._v("或"),a("code",[t._v("iOS")]),t._v("默认设置。")]),t._v(" "),a("h4",{attrs:{id:"设备像素比（dpr-device-pixel-ratio）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设备像素比（dpr-device-pixel-ratio）","aria-hidden":"true"}},[t._v("#")]),t._v(" 设备像素比（DPR: Device Pixel Ratio）")]),t._v(" "),a("p",[a("code",[t._v("设备像素比")]),t._v("简称为dpr，是"),a("code",[t._v("设备像素")]),t._v("和"),a("code",[t._v("设备独立像素")]),t._v("的比值，计算公式为：设备像素比 = 设备像素/设备独立像素")]),a("p",[t._v("获取方式:")]),a("ul",[a("li",[t._v("JS中，浏览器为我们提供了"),a("code",[t._v("window.devicePixelRatio")]),t._v("来帮助我们获取"),a("code",[t._v("dpr")]),t._v("。")]),a("li",[t._v("CSS中，可以使用媒体查询min-device-pixel-ratio，区分"),a("code",[t._v("dpr")]),t._v("：")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("React Native")]),t._v("中,可以使用PixelRatio.get()来获取"),a("code",[t._v("dpr")])])]),t._v(" "),a("h4",{attrs:{id:"位图像素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#位图像素","aria-hidden":"true"}},[t._v("#")]),t._v(" 位图像素")]),t._v(" "),a("p",[t._v("一个"),a("code",[t._v("位图像素")]),t._v("是栅格图像(如：png, jpg, gif等)最小的数据单元。每一个"),a("code",[t._v("位图像素")]),t._v("都包含着一些自身的显示信息(如：显示位置，颜色值，透明度等)。")]),t._v(" "),a("h4",{attrs:{id:"css像素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css像素","aria-hidden":"true"}},[t._v("#")]),t._v(" CSS像素")]),t._v(" "),a("p",[a("code",[t._v("CSS像素")]),t._v("是一个抽象的单位，主要使用在浏览器上，用来精确度量Web页面上的内容。")]),a("p",[t._v("当页面缩放比例为100%时，一个CSS像素等于一个设备独立像素，当用户对浏览器进行了放大，CSS像素会被放大，这时一个CSS像素会跨越更多的物理像素。")]),a("p",[t._v("在"),a("code",[t._v("chrome")]),t._v("开发者工具中，可以模拟web页面在手机端的显示比例，每种型号上面会显示一个尺寸，比如iPhone 6显示的尺寸是375x667，实际iPhone 6的实际分辨率为"),a("code",[t._v("1334x750")]),t._v("，这里显示的就是"),a("code",[t._v("设备独立像素")]),t._v("，预设的"),a("code",[t._v("设备像素比")]),t._v("为2。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1750px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867760-8b0db20d-9ba5-4b85-b388-2aca593089da.png#align=left&display=inline&height=1474&originHeight=1474&originWidth=1750&size=0&status=done&width=1750"}})]),t._v(" "),a("h3",{attrs:{id:"_1-3-retina屏幕"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-retina屏幕","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.3 Retina屏幕")]),t._v(" "),a("p",[t._v("移动端智能手机发展迅速，型号更为丰富。从早期的"),a("code",[t._v("320x480")]),t._v(",到现在"),a("code",[t._v("1080p")]),t._v("手机全面普及，屏幕分辨率、像素密度、屏幕比例一直都存在着一些差异。倘若我们都以实际的"),a("code",[t._v("物理分辨率（物理像素做为单位）")]),t._v("去做开发，理论上在尺寸相近机型中，分辨率的越高的手机页面元素会变得越来越小，类似于下图中的显示效果。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1162px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867772-6712a4f5-bc77-4e69-ab31-c019f4634e9e.png#align=left&display=inline&height=1028&originHeight=1028&originWidth=1162&size=0&status=done&width=1162"}})]),a("p",[t._v("而现实情况是，我们的智能手机，不管分辨率多高，他们所展示的界面比例都是基本类似的。乔布斯在"),a("code",[t._v("iPhone4")]),t._v("的发布会上首次提出了"),a("code",[t._v("Retina Display(视网膜屏幕)")]),t._v("的概念，它正是解决了上面的问题，这也使它成为一款跨时代的手机，后续发布的智能手机，都采用了类似的适配方案。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"976px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867792-e56887e6-7820-48ff-8df4-f27ea745c564.png#align=left&display=inline&height=714&originHeight=714&originWidth=976&size=0&status=done&width=976"}})]),a("p",[t._v("在"),a("code",[t._v("iPhone4")]),t._v("使用的视网膜屏幕中，把"),a("code",[t._v("2x2")]),t._v("个像素当1个像素使用，其实也就是前面提到的"),a("code",[t._v("设备独立像素")]),t._v("的在手机端的应用，这样让屏幕看起来更精致，但是元素的视觉大小却不会改变。如下图所示，在水平方向上，白色手机会用300个物理像素去渲染它，而黑色手机实际上会用600个物理像素去渲染它，黑色手机实际显示效果更为细腻，而两个手机中元素的大小不会有明显差异。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1252px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867791-531ff2fc-5e98-4159-8dc7-9aaaad8c6ea0.png#align=left&display=inline&height=1162&originHeight=1162&originWidth=1252&size=0&status=done&width=1252"}})]),t._v(" "),a("h3",{attrs:{id:"_1-4-视窗-viewport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-视窗-viewport","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.4 视窗(viewport)")]),t._v(" "),a("p",[a("code",[t._v("视窗(viewport)")]),t._v("在桌面浏览器中，是用来显示我们的网页的那一块区域。但在手机浏览器（或者App中的"),a("code",[t._v("WebView)")]),t._v("中，由于正常使用时横纵比例恰好和桌面浏览器相反，所以"),a("code",[t._v("viewport")]),t._v("相对较窄，为了能更好为CSS布局服务，所以提供了三个"),a("code",[t._v("viewport")]),t._v(": "),a("code",[t._v("布局视窗(layout viewport)")]),t._v("、"),a("code",[t._v("视觉视窗（visual viewport）")]),t._v(" 和"),a("code",[t._v("理想视窗(ideal viewport)")]),t._v(" 。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1300px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867786-eaba21ed-14cf-432c-8a6b-05915ce7f49e.png#align=left&display=inline&height=180&originHeight=180&originWidth=1300&size=0&status=done&width=1300"}})]),t._v(" "),a("h4",{attrs:{id:"布局视窗-layout-viewport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#布局视窗-layout-viewport","aria-hidden":"true"}},[t._v("#")]),t._v(" 布局视窗(layout viewport)")]),t._v(" "),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1134px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867828-994e0cb6-8130-407f-b159-d71361086042.png#align=left&display=inline&height=946&originHeight=946&originWidth=1134&size=0&status=done&width=1134"}})]),a("p",[a("code",[t._v("布局视窗(layout viewport)")]),t._v("：当我们以百分比来指定一个元素的大小时，它的计算值是由这个元素的包含块计算而来的。当这个元素是最顶级的元素时，它就是基于布局视窗来计算的。所以，布局视窗是网页布局的基准窗口。")]),a("p",[t._v("在PC浏览器中，布局视窗就等于当前浏览器的窗口大小（不包括"),a("code",[t._v("borders")]),t._v(" 、"),a("code",[t._v("margins")]),t._v("、滚动条）。")]),a("p",[t._v("在移动端浏览器中，布局视窗被赋予一个默认值，大部分为980px，这保证PC的网页可以在手机浏览器上呈现，但是非常小，用户可以手动对网页进行放大。")]),a("p",[t._v("我们可以通过调用"),a("code",[t._v("document.documentElement.clientWidth / clientHeight")]),t._v("来获取布局视窗大小。")]),t._v(" "),a("h4",{attrs:{id:"视觉视窗-visual-viewport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视觉视窗-visual-viewport","aria-hidden":"true"}},[t._v("#")]),t._v(" 视觉视窗(visual viewport)")]),t._v(" "),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1324px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867974-acde270a-db5a-4803-9216-4b3f26e27959.png#align=left&display=inline&height=1104&originHeight=1104&originWidth=1324&size=0&status=done&width=1324"}})]),a("p",[a("code",[t._v("视觉视窗(visual viewport)")]),t._v("：用户通过屏幕真实看到的区域,默认等于当前浏览器的窗口大小（包括滚动条宽度）。")]),a("p",[t._v("当用户对浏览器进行缩放时，不会改变布局视窗的大小，所以页面布局是不变的，但是缩放会改变视觉视窗的大小。")]),a("p",[t._v("例如：用户将浏览器窗口放大了200%，这时浏览器窗口中的"),a("code",[t._v("CSS")]),t._v("像素会随着视觉视窗的放大而放大，这时一个"),a("code",[t._v("CSS像素")]),t._v("会跨越更多的物理像素。")]),a("p",[t._v("所以"),a("code",[t._v("布局视窗")]),t._v("会限制你的"),a("code",[t._v("CSS布局")]),t._v(",而"),a("code",[t._v("视觉视窗")]),t._v("决定用户具体能看到什么。")]),a("p",[t._v("我们可以通过调用"),a("code",[t._v("window.innerWidth / innerHeight")]),t._v("来获取视觉视窗大小。")]),t._v(" "),a("h4",{attrs:{id:"理想视窗-ideal-viewport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理想视窗-ideal-viewport","aria-hidden":"true"}},[t._v("#")]),t._v(" 理想视窗(ideal viewport)")]),t._v(" "),a("p",[t._v("布局视窗在移动端展示的效果并不是一个理想的效果，所以"),a("code",[t._v("理想视窗(ideal viewport)")]),t._v("就诞生了：网站页面在移动端展示的理想大小。")]),a("p",[t._v("如上图，在浏览器调试移动端时页面上给定的像素大小就是理想视窗大小，它的单位正是设备独立像素。")]),a("p",[t._v("当页面缩放比例为100%时，CSS像素 = 设备独立像素，理想视窗 = 视觉视窗。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1272px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867824-c9a56507-284d-4a9a-ba9e-326ca6e06f56.png#align=left&display=inline&height=664&originHeight=664&originWidth=1272&size=0&status=done&width=1272"}})]),a("p",[t._v("我们可以通过调用"),a("code",[t._v("screen.width / height")]),t._v("来获取理想视窗大小。")]),t._v(" "),a("h4",{attrs:{id:"meta标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#meta标签","aria-hidden":"true"}},[t._v("#")]),t._v(" meta标签")]),t._v(" "),a("p",[a("code",[t._v("<meta>")]),t._v("标签有很多种，而这里要着重说的是"),a("code",[t._v("viewport")]),t._v("的"),a("code",[t._v("meta标签")]),t._v("，它可以告诉浏览器如何规范的渲染Web页面。在移动端为了得到更好的展示效果，通常需要设置meta标签如下：")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("content中参数的含义如下：")]),a("table",{staticClass:"lake-table"},[a("colgroup",[a("col",{attrs:{width:"240"}}),a("col",{attrs:{width:"240"}}),a("col",{attrs:{width:"240"}})]),a("tbody",[a("tr",[a("td",[t._v("Value")]),a("td",[t._v("可能值")]),a("td",[t._v("描述")])])]),a("tbody",[a("tr",[a("td",[a("code",[t._v("width")])]),a("td",[t._v("正整数或"),a("code",[t._v("device-width")])]),a("td",[t._v("以pixels（像素）为单位， 定义布局视窗的宽度。")])]),a("tr",[a("td",[a("code",[t._v("height")])]),a("td",[t._v("正整数或"),a("code",[t._v("device-width")])]),a("td",[t._v("以pixels（像素）为单位， 定义布局视窗的高度。")])]),a("tr",[a("td",[a("code",[t._v("initial-scale")])]),a("td",[t._v("0.0 - 10.0")]),a("td",[t._v("定义页面初始缩放比率。")])]),a("tr",[a("td",[a("code",[t._v("minimum-scale")])]),a("td",[t._v("0.0 - 10.0")]),a("td",[t._v("定义缩放的最小值；必须小于或等于maximum-scale的值。")])]),a("tr",[a("td",[a("code",[t._v("maximum-scale")])]),a("td",[t._v("0.0 - 10.0")]),a("td",[t._v("定义缩放的最大值；必须大于或等于minimum-scale的值。")])]),a("tr",[a("td",[a("code",[t._v("user-scalable")])]),a("td",[t._v("一个布尔值（yes 或者 no）")]),a("td",[t._v("如果设置为 no，用户将不能放大或缩小网页。默认值为 yes。")])])])]),t._v(" "),a("h4",{attrs:{id:"移动端配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移动端配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 移动端配置")]),t._v(" "),a("p",[t._v("为了在移动端让页面获得更好的显示效果，我们必须让布局视窗、视觉视窗都尽可能等于理想视窗。")]),a("p",[a("code",[t._v("device-width")]),t._v("就等于理想视窗的宽度，所以设置"),a("code",[t._v("width=device-width")]),t._v("就相当于让布局视窗等于理想视窗。")]),a("p",[t._v("由于"),a("code",[t._v("initial-scale = 理想视窗宽度 / 视觉视窗宽度")]),t._v("，所以我们设置"),a("code",[t._v("initial-scale=1;")]),t._v("就相当于让视觉视窗等于理想视窗。")]),a("p",[t._v("这时，1个"),a("code",[t._v("CSS像素")]),t._v("就等于1个"),a("code",[t._v("设备独立像素")]),t._v("，而且我们也是基于理想视窗来进行布局的，所以呈现出来的页面布局在各种设备上都能大致相似。")]),t._v(" "),a("h4",{attrs:{id:"缩放"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缩放","aria-hidden":"true"}},[t._v("#")]),t._v(" 缩放")]),t._v(" "),a("p",[t._v("上面提到"),a("code",[t._v("width")]),t._v("可以决定布局视窗的宽度，实际上它并不是布局视窗的唯一决定性因素，设置"),a("code",[t._v("initial-scale")]),t._v("也有肯能影响到布局视窗，因为布局视窗宽度取的是"),a("code",[t._v("width")]),t._v("和视觉视窗宽度的最大值。")]),a("p",[t._v("例如：若手机的理想视窗宽度为"),a("code",[t._v("400px")]),t._v("，设置"),a("code",[t._v("width=device-width，initial-scale=2")]),t._v("，此时视觉视窗宽度 = 理想视窗宽度 / initial-scale即200px，布局视窗取两者最大值即device-width 400px。")]),a("p",[t._v("若设置"),a("code",[t._v("width=device-width，initial-scale=0.5")]),t._v("，此时"),a("code",[t._v("视觉视窗宽度 = 理想视窗宽度 / initial-scale")]),t._v("即"),a("code",[t._v("800px")]),t._v("，布局视窗取两者最大值即"),a("code",[t._v("800px")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"浏览器窗口api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器窗口api","aria-hidden":"true"}},[t._v("#")]),t._v(" 浏览器窗口API")]),t._v(" "),a("p",[t._v("浏览器为我们提供的获取窗口大小的API有很多，下面我们再来对比一下：")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"2842px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867833-bb31db91-924c-4a5b-861f-773861645d90.png#align=left&display=inline&height=1462&originHeight=1462&originWidth=2842&size=0&status=done&width=2842"}})]),a("ul",[a("li",[a("code",[t._v("window.innerHeight")]),t._v("：获取浏览器视觉视窗高度（包括垂直滚动条）。")]),a("li",[a("code",[t._v("window.outerHeight")]),t._v("：获取浏览器窗口外部的高度。表示整个浏览器窗口的高度，包括侧边栏、窗口镶边和调正窗口大小的边框。")]),a("li",[a("code",[t._v("window.screen.Height")]),t._v("：获取获屏幕取理想视窗高度，这个数值是固定的，"),a("code",[t._v("设备的分辨率/设备像素比")])]),a("li",[a("code",[t._v("window.screen.availHeight")]),t._v("：浏览器窗口可用的高度。")]),a("li",[a("code",[t._v("document.documentElement.clientHeight")]),t._v("：获取浏览器布局视窗高度，包括内边距，但不包括垂直滚动条、边框和外边距。")]),a("li",[a("code",[t._v("document.documentElement.offsetHeight")]),t._v("：包括内边距、滚动条、边框和外边距。")]),a("li",[a("code",[t._v("document.documentElement.scrollHeight")]),t._v("：在不使用滚动条的情况下适合视窗中的所有内容所需的最小宽度。测量方式与"),a("code",[t._v("clientHeight")]),t._v("相同：它包含元素的内边距，但不包括边框，外边距或垂直滚动条。")])]),t._v(" "),a("h2",{attrs:{id:"二、适配方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、适配方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 二、适配方案")]),t._v(" "),a("p",[t._v("前面提到的"),a("code",[t._v("Retina屏幕")]),t._v("的显示方案,已经在一定程度上对不同分辨率显示效果进行了适配,那么开发者还需要做其它的适配吗？答案是肯定的，"),a("code",[t._v("Android")]),t._v("生态手机屏幕尺寸非常多、分辨率高低跨度非常大，不像苹果只有它自己的几款固定设备、尺寸，即便是同为ios生态，预设的"),a("code",[t._v("设备像素比")]),t._v("也不尽相同，还有一些不能忽视的高清屏幕显示上的差异性问题（1px、图片模糊）。所以，为了保证各型号手机的更好显示效果，针对性的做适配开发还是比较重要的。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1092px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867806-52307733-4bf1-49ea-a7de-5daef1249cf7.png#align=left&display=inline&height=458&originHeight=458&originWidth=1092&size=0&status=done&width=1092"}})]),a("p",[a("a",{attrs:{href:"https://material.io/tools/devices/",target:"_blank"}},[t._v("常用设备参数列表")])]),a("p",[t._v("移动端布局适配的初衷，是最大程度在各个尺寸屏幕上还原设计稿。当然设计稿一般只会出一个基准尺寸，我们要做的其实是用相似的布局比例，让页面内容在各个尺寸屏幕上都能合理显示，与此同时也要最大程度的减少开发中的尺寸单位人工计算。")]),a("p",[t._v("以下适配示例均采用UI设计常用的机型"),a("code",[t._v("iPhone 6")]),t._v("作为基准设计尺寸，"),a("code",[t._v("iPhone 6")]),t._v("的"),a("code",[t._v("物理分辨率")]),t._v("为"),a("code",[t._v("750 x 1334")]),t._v(","),a("code",[t._v("设备像素比")]),t._v("为"),a("code",[t._v("2")]),t._v("，则对应开发中"),a("code",[t._v("设备独立像素")]),t._v("为"),a("code",[t._v("375 x 667")]),t._v("。")]),a("p",[t._v("注意：以下几种适配方案使用的"),a("code",[t._v("单位")]),t._v("并不适合用到段落文本上,对于文本内容的适配原则，应该是保持阅读舒适性的基础上，屏幕尺寸越大，一次性展示的文字内容越多。")]),t._v(" "),a("h3",{attrs:{id:"_2-1-rem方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-rem方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1 rem方案")]),t._v(" "),a("p",[a("code",[t._v("rem")]),t._v("是相对于"),a("code",[t._v("html")]),t._v("节点的"),a("code",[t._v("font-size")]),t._v("来做计算的一个相对单位，在"),a("code",[t._v("运行时")]),t._v("动态修改"),a("code",[t._v("html")]),t._v("节点的"),a("code",[t._v("font-size")]),t._v("大小，从而影响所有使用"),a("code",[t._v("rem")]),t._v("单位的布局。")]),a("p",[t._v("1rem该设为多少？其实没有什么统一的标准。国内主流网站也都在使用"),a("code",[t._v("rem")]),t._v("方案,具体方案和阿里的大同小异，根据是否缩放"),a("code",[t._v("viewport")]),t._v("分为两个阵营：")]),a("p",[t._v("不缩放viewport(屏幕宽度为"),a("code",[t._v("375px")]),t._v("）：")]),a("ul",[a("li",[a("a",{attrs:{href:"https://m.mafengwo.cn/",target:"_blank"}},[t._v("马蜂窝")]),t._v(" 1rem = 37.5px")]),a("li",[a("a",{attrs:{href:"https://www.mi.com/",target:"_blank"}},[t._v("小米")]),t._v(" 1rem = 52.0833px")]),a("li",[a("a",{attrs:{href:"https://www.xiaohongshu.com/",target:"_blank"}},[t._v("小红书")]),t._v(" 1rem = 50px"),a("br"),t._v("缩放viewport(屏幕宽度为"),a("code",[t._v("375px")]),t._v(",viewport scale为"),a("code",[t._v("0.5")]),t._v("）：")]),a("li",[a("a",{attrs:{href:"https://m.bilibili.com/",target:"_blank"}},[t._v("B站")]),t._v(" 1rem = 46.875px")]),a("li",[a("a",{attrs:{href:"https://m.sohu.com/",target:"_blank"}},[t._v("搜狐")]),t._v(" 1rem = 75px"),a("br"),t._v("最早的rem方案是阿里早期提出并在手机淘宝上使用,同期封装开源了"),a("a",{attrs:{href:"https://github.com/amfe/lib-flexible",target:"_blank"}},[t._v("lib-flexible")]),t._v("适配库，下面以"),a("code",[t._v("flexible")]),t._v("的方案为例介绍："),a("br"),t._v("首先约定将设备的"),a("code",[t._v("布局视窗")]),t._v("进行"),a("code",[t._v("10")]),t._v("等分，将"),a("code",[t._v("html")]),t._v("节点的"),a("code",[t._v("font-size")]),t._v("设置为页面"),a("code",[t._v("布局视窗")]),t._v("的"),a("code",[t._v("1/10")]),t._v("，即"),a("code",[t._v("1rem")]),t._v("就等于页面"),a("code",[t._v("布局视窗")]),t._v("的"),a("code",[t._v("1/10")]),t._v("，这就意味着我们后面使用的"),a("code",[t._v("rem")]),t._v("都是按照"),a("code",[t._v("页面")]),t._v("比例来计算的。"),a("br"),t._v("以"),a("code",[t._v("iPhone6")]),t._v("为例：布局视窗为"),a("code",[t._v("375px")]),t._v("，则"),a("code",[t._v("1rem = 37.5px")]),t._v("，这时UI给定一个元素的宽为"),a("code",[t._v("75px")]),t._v("，我们只需要将它设置为"),a("code",[t._v("75 / 37.5 = 2rem")]),t._v("。"),a("br"),t._v("接下来要做的就是，根据设备的"),a("code",[t._v("独立像素比")]),t._v(",在"),a("code",[t._v("运行时")]),t._v("控制根节点"),a("code",[t._v("font-size")]),t._v("的大小，使用css或者js都可以实现："),a("br"),t._v("一种是媒体查询，优点：不需要额外使用"),a("code",[t._v("js")]),t._v("去更改"),a("code",[t._v("html")]),t._v("的字体，缺点：不连续，或者说并能完全实现对所有设备的布局规范统一；")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50px\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" only screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("min-device-width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 375px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 37.5px\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" only screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("min-device-width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 360px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 36px\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[t._v("另一种是"),a("code",[t._v("js")]),t._v("动态更改"),a("code",[t._v("html")]),t._v("字体，优点：连续；缺点：不如直接写媒体查询的体验好；")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// set 1rem = viewWidth / 10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRemUnit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" rem "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" docEl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientWidth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n   docEl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fontSize "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rem "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRemUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onresize")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRemUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("该方案是阿里手淘早期使用,并封装开源了"),a("a",{attrs:{href:"https://github.com/amfe/lib-flexible",target:"_blank"}},[t._v("lib-flexible")]),t._v("库，它的主要思想有三点：")]),a("ul",[a("li",[t._v("根据"),a("code",[t._v("dpr")]),t._v("的值来修改"),a("code",[t._v("viewport")]),t._v("实现1px的线")]),a("li",[t._v("根据"),a("code",[t._v("dpr")]),t._v("的值来修改"),a("code",[t._v("html")]),t._v("的"),a("code",[t._v("font-size")]),t._v("，从而使用"),a("code",[t._v("rem")]),t._v("实现等比缩放")]),a("li",[t._v("使用"),a("code",[t._v("Hack")]),t._v("手段用"),a("code",[t._v("rem")]),t._v("模拟"),a("code",[t._v("vw")]),t._v("特性"),a("br"),t._v("存在的问题:")]),a("li",[t._v("需要额外"),a("code",[t._v("内联引入")]),t._v("一个"),a("a",{attrs:{href:"https://github.com/amfe/lib-flexible",target:"_blank"}},[t._v("lib-flexible")]),t._v("库,保证在所有资源加载之前执行这个JS，使用iframe引用就会出现问题。")]),a("li",[a("code",[t._v("html")]),t._v("的"),a("code",[t._v("font-size")]),t._v("设置到12px以下还是会按照12px=1rem来计算，这样所有使用了rem单位的尺寸都是错的。")]),a("li",[t._v("在奇葩的"),a("code",[t._v("dpr")]),t._v("设备上表现效果不太好，比如一些华为的高端机型 用rem布局会出现错乱。")])]),t._v(" "),a("h3",{attrs:{id:"_2-2-vw方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-vw方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.2 vw方案")]),t._v(" "),a("p",[t._v("大漠老师的文章中提到，"),a("code",[t._v("flexible+rem")]),t._v("只是当时的一个过渡方案，已经可以放弃使用，不管是现在的版本还是以前的版本，都存有一定的问题。它本质上只能算作一种"),a("code",[t._v("Hack")]),t._v("手段，是在用"),a("code",[t._v("rem")]),t._v("模拟"),a("code",[t._v("vw")]),t._v("特性,因为早期的"),a("code",[t._v("vw")]),t._v("一直存在兼容性不足的问题。")]),a("p",[t._v("现在在2019年这个时间点上，我们看到"),a("code",[t._v("viewport")]),t._v("单位的浏览器支持程度已达96.26%,考虑到主流浏览器兼容性较好，我们是时候使用"),a("code",[t._v("viewport")]),t._v("单位大展身手了。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1273px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867816-fbfc5c12-074a-4269-98ef-b304ca0df168.png#align=left&display=inline&height=485&originHeight=485&originWidth=1273&size=0&status=done&width=1273"}})]),a("p",[a("code",[t._v("viewport")]),t._v("单位有以下几种：")]),a("ul",[a("li",[a("code",[t._v("vw(viewport's width)")]),t._v("："),a("code",[t._v("1vw")]),t._v("等于视觉视口的"),a("code",[t._v("1%")])]),a("li",[a("code",[t._v("vh(viewport's height)")]),t._v(" : "),a("code",[t._v("1vh")]),t._v(" 为视觉视口高度的"),a("code",[t._v("1%")])]),a("li",[a("code",[t._v("vmin")]),t._v(": vw 和 vh 中的较小值")]),a("li",[a("code",[t._v("vmax")]),t._v(": 选取 vw 和 vh 中的较大值"),a("br"),a("img",{staticStyle:{"max-width":"600px",width:"639px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867822-407afa9f-d464-4876-b9e4-8326dfe9a5e2.png#align=left&display=inline&height=686&originHeight=686&originWidth=639&size=0&status=done&width=639"}}),a("br"),t._v("如果视觉窗口为"),a("code",[t._v("375px")]),t._v("，那么"),a("code",[t._v("1vw = 3.75px")]),t._v("，这时UI给定一个元素的宽为75px（设备独立像素），我们只需要将它设置为"),a("code",[t._v("75 / 3.75 = 20vw")]),t._v("。"),a("br"),t._v("这里的比例关系我们也不用自己换算，如果你使用"),a("code",[t._v("vscode")]),t._v(","),a("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=liurongqing.px2vw",target:"_blank"}},[t._v("px2vw")]),t._v("、"),a("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=leechaojiang.px-to-vw",target:"_blank"}},[t._v("px-to-vw")]),t._v("这样的插件还是能找到的,效果如下："),a("br"),a("img",{staticStyle:{"max-width":"600px",width:"478px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/gif/173824/1559292867824-5645e005-6cac-4555-8d62-977f7b94f4b7.gif#align=left&display=inline&height=260&originHeight=260&originWidth=478&size=0&status=done&width=478"}}),a("br"),t._v("另外我们还可以使用"),a("code",[t._v("postCSS")]),t._v("的"),a("code",[t._v("postCSS-px-to-viewport")]),t._v("插件帮我们完成这个过程。根据设计稿的默认大小，我们在"),a("code",[t._v("postCSS")]),t._v("的配置文件中添加一些配置：")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'autoprefixer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'postcss-px-to-viewport'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           viewportWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("750")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 视窗的宽度，对应的是我们设计稿的宽度，一般是750")]),t._v("\n           viewportHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1334")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 视窗的高度，根据750设备的宽度来指定，一般指定1334，也可以不配置")]),t._v("\n           unitPrecision"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定`px`转换为视窗单位值的小数位数（很多时候无法整除）")]),t._v("\n           viewportUnit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vw'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定需要转换成的视窗单位，建议使用vw")]),t._v("\n           selectorBlackList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.ignore'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.hairlines'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名")]),t._v("\n           minPixelValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 小于或等于`1px`不转换为视窗单位，你也可以设置为你想要的值")]),t._v("\n           mediaQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 允许在媒体查询中转换`px`")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("以750px宽度的视觉设计稿为例，那么"),a("code",[t._v("100vw = 750px")]),t._v("，即"),a("code",[t._v("1vw = 7.5px")]),t._v("。那么我们可以根据设计图上的"),a("code",[t._v("px")]),t._v("值直接转换成对应的"),a("code",[t._v("vw")]),t._v("值。在实际撸码过程，不需要进行任何的计算，直接在代码中写px，对于不需要自动转换单位的样式，可以在对应的元素html标签中添加配置中指定的类名"),a("code",[t._v(".ignore")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test ignore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".test")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 75px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-bottom-width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 4px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("line-height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 20px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".ignore")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("编译出来的CSS为：")]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".test")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10vw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-bottom-width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" .533vw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("line-height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2.667vw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".ignore")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("当然，没有一种方案是十全十美的，vw同样有一定的缺陷：")]),a("ul",[a("li",[a("code",[t._v("px")]),t._v("转换成"),a("code",[t._v("vw")]),t._v("不一定能完全整除，因此有一定的像素差。")]),a("li",[t._v("当容器使用"),a("code",[t._v("vw")]),t._v("，"),a("code",[t._v("margin")]),t._v("采用"),a("code",[t._v("px")]),t._v("时，很容易造成整体宽度超过"),a("code",[t._v("100vw")]),t._v("，从而影响布局效果。当然我们也是可以避免的，例如使用"),a("code",[t._v("padding")]),t._v("代替"),a("code",[t._v("margin")]),t._v("，结合"),a("code",[t._v("calc()")]),t._v("函数使用等等...")]),a("li",[t._v("在"),a("code",[t._v("Android 4.4")]),t._v("之下和"),a("code",[t._v("iOS8")]),t._v("以下的版本都存有一定的问题,如果一定要考虑兼容这些设备，"),a("a",{attrs:{href:"https://github.com/rodneyrehm/viewport-units-buggyfill",target:"_blank"}},[t._v("viewport-units-buggyfill")]),t._v("也可以帮你解决兼容问题。")])]),t._v(" "),a("h3",{attrs:{id:"_2-3-微信小程序的适配方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-微信小程序的适配方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.3 微信小程序的适配方案")]),t._v(" "),a("p",[a("code",[t._v("微信小程序")]),t._v("中的引入了"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html",target:"_blank"}},[t._v("rpx")]),t._v("作为动态单位，它的定义和实现思路与上述两种方案很相似。")]),a("p",[t._v("首先，我们依据常规设计稿"),a("code",[t._v("750")]),t._v("宽度，约定我们要适配的所有设备的屏幕"),a("code",[t._v("基准宽度")]),t._v("都是"),a("code",[t._v("750rpx")]),t._v(",这里的"),a("code",[t._v("rpx")]),t._v("是相对于"),a("code",[t._v("基准宽度")]),t._v("的单位。如在 "),a("code",[t._v("iPhone6")]),t._v(" 上，屏幕宽度为"),a("code",[t._v("375px")]),t._v("，共有750个"),a("code",[t._v("物理像素")]),t._v("，则"),a("code",[t._v("750rpx = 375px = 750物理像素")]),t._v("，"),a("code",[t._v("1rpx = 0.5px = 1物理像素")]),t._v("。其它设备的单位换算关系如下：")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"1014px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867829-bd52247f-bd4e-40f6-a0a3-8053c0fef7f7.png#align=left&display=inline&height=264&originHeight=264&originWidth=1014&size=0&status=done&width=1014"}})]),a("p",[t._v("该方案的优点是，可以直接使用设计稿上的单位长度开发，不必人工进行单位转换，完全由小程序运行时根据设备类型动态进行单位转换。")]),t._v(" "),a("h3",{attrs:{id:"_2-4-适配iphonex"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-适配iphonex","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.4 适配iPhoneX")]),t._v(" "),a("h4",{attrs:{id:"安全区域-safe-area"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安全区域-safe-area","aria-hidden":"true"}},[t._v("#")]),t._v(" 安全区域(safe area)")]),t._v(" "),a("p",[t._v("核心内容应该处于 Safe area 确保不会被设备"),a("code",[t._v("圆角(corners)")]),t._v("，"),a("code",[t._v("传感器外壳(sensor housing，齐刘海)")]),t._v(" 以及底部的"),a("code",[t._v("Home Indicator")]),t._v("遮挡。也就是说 我们设计显示的内容应该尽可能的在安全区域内；")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"627px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867824-0c1af0c6-75c5-4da3-9642-97f4b82ff844.png#align=left&display=inline&height=311&originHeight=311&originWidth=627&size=0&status=done&width=627"}})]),t._v(" "),a("h4",{attrs:{id:"viewport-fit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#viewport-fit","aria-hidden":"true"}},[t._v("#")]),t._v(" viewport-fit")]),t._v(" "),a("p",[t._v("在iOS 11中采用了"),a("code",[t._v("viewport-fit")]),t._v("的"),a("code",[t._v("meta")]),t._v("标签作为适配方案, 它用于限制网页如何在安全区域内进行展示。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"629px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867833-b0eaf474-1d57-4ce0-a14e-a5eafa83c630.png#align=left&display=inline&height=372&originHeight=372&originWidth=629&size=0&status=done&width=629"}})]),a("p",[a("code",[t._v("viewport-fit")]),t._v(" 的设置如下：")]),a("ul",[a("li",[a("code",[t._v("contain")]),t._v("："),a("code",[t._v("布局视窗")]),t._v("和"),a("code",[t._v("视觉视窗")]),t._v("被设置为最大的矩形,"),a("code",[t._v("viewport")]),t._v("完全包含网页内容,在"),a("code",[t._v("viewport")]),t._v("之外的UA绘制的是未定义的，它可能是画布的背景色，或者UA认为合适的其他东西。")]),a("li",[a("code",[t._v("cover")]),t._v("："),a("code",[t._v("布局视窗")]),t._v("和"),a("code",[t._v("视觉视窗")]),t._v("被设置为设备物理屏幕的限定矩形,如上图2所示，网页内容完全覆盖可视窗口。")]),a("li",[a("code",[t._v("auto")]),t._v(": 默认设置"),a("code",[t._v("auto")]),t._v(",和"),a("code",[t._v("contain")]),t._v("效果一致。")])]),t._v(" "),a("h4",{attrs:{id:"env、constant"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#env、constant","aria-hidden":"true"}},[t._v("#")]),t._v(" env、constant")]),t._v(" "),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"636px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867851-27a0e285-36c7-4341-8aa9-ce7363880647.png#align=left&display=inline&height=496&originHeight=496&originWidth=636&size=0&status=done&width=636"}})]),a("p",[t._v("我们需要将顶部和底部合理的摆放在安全区域内，iOS11新增了两个CSS函数"),a("code",[t._v("env")]),t._v("、"),a("code",[t._v("constant")]),t._v("，用于设定安全区域与边界的距离。")]),a("p",[t._v("函数内部可以是四个常量：")]),a("ul",[a("li",[a("code",[t._v("safe-area-inset-left")]),t._v("：安全区域距离左边边界距离")]),a("li",[a("code",[t._v("safe-area-inset-right")]),t._v("：安全区域距离右边边界距离")]),a("li",[a("code",[t._v("safe-area-inset-top")]),t._v("：安全区域距离顶部边界距离")]),a("li",[a("code",[t._v("safe-area-inset-bottom")]),t._v("：安全区域距离底部边界距离"),a("br"),t._v("在设置"),a("code",[t._v("viewport-fit=cove")]),t._v("的基础上，"),a("code",[t._v("constant")]),t._v("在"),a("code",[t._v("iOS < 11.2")]),t._v("的版本中生效，"),a("code",[t._v("env")]),t._v("在"),a("code",[t._v("iOS >= 11.2")]),t._v("的版本中生效，这意味着我们往往要同时设置他们，将页面限制在安全区域内，兼容版本CSS代码如下：")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".iPhoneX")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-top")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constant")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" //为导航栏+状态栏的高度 88px\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-top")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" //为导航栏+状态栏的高度 88px\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-left")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constant")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-left"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" //如果未竖屏时为0\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-left")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-left"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" //如果未竖屏时为0\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-right")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constant")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-right"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" //如果未竖屏时为0\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-right")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-right"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" //如果未竖屏时为0\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-bottom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constant")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-bottom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" //为底下圆弧的高度 34px\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-bottom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("safe-area-inset-bottom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" //为底下圆弧的高度 34px\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h3",{attrs:{id:"_2-5-横屏适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-横屏适配","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.5 横屏适配")]),t._v(" "),a("p",[t._v("手机方向旋转，会导致横竖屏长度互换，页面显示比例当然也会发生变化，所以需要针对特定场景做出适配。")]),a("ul",[a("li",[t._v("js可以通过"),a("code",[t._v("window.orientation")]),t._v("获取屏幕旋转方向，屏幕旋转后页面宽高发生变化，会触发"),a("code",[t._v("resize")]),t._v("事件。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resize"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orientation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orientation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 正常方向或屏幕旋转180度")]),t._v("\n       console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'竖屏'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orientation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("90")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orientation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("90")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 屏幕顺时钟旋转90度或屏幕逆时针旋转90度")]),t._v("\n       console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'横屏'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("ul",[a("li",[t._v("CSS也可以检测到屏幕旋转")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("orientation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" portrait"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*竖屏...*/")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("orientation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" landscape"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*横屏...*/")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h2",{attrs:{id:"三、其它常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、其它常见问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 三、其它常见问题")]),t._v(" "),a("h3",{attrs:{id:"_3-1-1px问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1px问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.1 1px问题")]),t._v(" "),a("p",[t._v("产生原因：目前移动设备普遍的设备像素比为2或3，1px"),a("code",[t._v("CSS像素")]),t._v("实际渲染为2（3）"),a("code",[t._v("物理像素")]),t._v("，所以"),a("code",[t._v("视觉效果")]),t._v("比较粗。注意这里是视觉效果比较粗，我们谈到视觉效果时这里的衡量单位就不再是"),a("code",[t._v("像素")]),t._v(",而应该是"),a("code",[t._v("cm")]),t._v("、"),a("code",[t._v("mm")]),t._v("甚至"),a("code",[t._v("μm")]),t._v(",因为无论多小的"),a("code",[t._v("物理像素")]),t._v("都是有自己的宽和高的，由前面的屏幕放大我们观察到，像素单元的排列也不是特别紧密相接的，也就是说"),a("code",[t._v("Retina屏幕")]),t._v("上的2（3）个"),a("code",[t._v("物理像素")]),t._v("点宽度再加上它们之间的缝隙宽度的总和，完全可能大于正常屏幕上真正1个"),a("code",[t._v("物理像素")]),t._v("点的宽度，所以有些屏幕显示1px视觉较粗也就不奇怪了。")]),a("p",[t._v("解决方案：")]),a("ul",[a("li",[t._v("伪元素 + transform，示例如下：")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border_1px:before")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("position")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" absolute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("top")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform-origin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50% 0%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" only screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border_1px:before")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scaleY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0.5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" only screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border_1px:before")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scaleY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0.33"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br")])]),a("ul",[a("li",[t._v("使用"),a("code",[t._v("border-image")]),t._v("，示例如下：")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border_1px")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-bottom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px solid #000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" only screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border_1px")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-bottom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0 0 1px 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("../img/1px_line.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" 0 0 2 0 stretch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("ul",[a("li",[t._v("使用"),a("code",[t._v("background-image")]),t._v("，示例如下：")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border_1px")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-bottom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px solid #000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" only screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border_1px")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("../img/1px_line.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" repeat-x left bottom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100% 1px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("ul",[a("li",[t._v("使用"),a("code",[t._v("SVG")]),t._v("作为"),a("code",[t._v("border-image")]),t._v("或者"),a("code",[t._v("background-image")]),t._v("，从大漠老师文章中得知此方案，需要借助"),a("code",[t._v("PostCSS")]),t._v("的"),a("code",[t._v("postcss-write-svg")]),t._v("插件，项目中有使用"),a("code",[t._v("PostCSS")]),t._v("的，可考虑采用。")])]),t._v(" "),a("div",{staticClass:"language-less line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-less"}},[a("code",[a("span",{pre:!0,attrs:{class:"token atrule"}},[t._v("@svg border_1px")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token atrule"}},[t._v("@rect")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("fill")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("var")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" black"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".example")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px solid transparent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("svg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("border_1px "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("param")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("color #00b1ff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 2 2 stretch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("ul",[a("li",[t._v("编译后：")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".example")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px solid transparent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='2px'%3E%3Crect fill='%2300b1ff' width='100%25' height='50%25'/%3E%3C/svg%3E\""),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" 2 2 stretch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("注意： 直接将宽设为"),a("code",[t._v("0.5px")]),t._v(",在"),a("code",[t._v("iOS8")]),t._v("以下以及众多"),a("code",[t._v("Android")]),t._v("机型上的都是无效的，兼容效果很不理想，不建议使用这种解决方案。")])]),t._v(" "),a("h3",{attrs:{id:"_3-2-图片模糊问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-图片模糊问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.2 图片模糊问题")]),t._v(" "),a("p",[t._v("产生原因：我们平时使用的图片（"),a("code",[t._v("png、jpg等格式")]),t._v("）都属于位图图像，位图由一个个像素点构成的，每个像素都具有特定的位置和精确的颜色值。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"459px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867844-9ae11bf6-db4a-45cc-8b86-3fdec7711a6d.png#align=left&display=inline&height=285&originHeight=285&originWidth=459&size=0&status=done&width=459"}})]),a("p",[t._v("理论上，位图的每个像素对应在屏幕上使用一个物理像素来渲染，才能达到最佳的显示效果。")]),a("p",[t._v("而在"),a("code",[t._v("dpr > 1")]),t._v("的屏幕上，位图的一个像素可能由多个物理像素来渲染，由于单个位图像素不可以再进一步分割，所以只能就近取颜色的近似值，导致图片看起来比较模糊。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"556px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867845-f9e5cb9f-f8eb-487f-85ec-c67bd8a0b8db.png#align=left&display=inline&height=220&originHeight=220&originWidth=556&size=0&status=done&width=556"}})]),a("p",[t._v("解决方案：为了保证图片质量，我们应该尽可能让一个"),a("code",[t._v("物理像素")]),t._v("来渲染一个"),a("code",[t._v("图片像素")]),t._v("，所以，针对不同"),a("code",[t._v("dpr")]),t._v("的屏幕，我们需要展示不同分辨率的图片。")]),a("p",[t._v("如：在"),a("code",[t._v("dpr=2")]),t._v("的屏幕上展示两倍图"),a("code",[t._v("(@2x)")]),t._v("，在"),a("code",[t._v("dpr=3")]),t._v("的屏幕上展示三倍图"),a("code",[t._v("(@3x)")]),t._v("。")]),a("p",[a("img",{staticStyle:{"max-width":"600px",width:"649px"},attrs:{src:"https://cdn.nlark.com/yuque/18/2019/png/173824/1559292867851-12475d17-7624-49c0-a3fd-d2fd8fb4a3f6.png#align=left&display=inline&height=299&originHeight=299&originWidth=649&size=0&status=done&width=649"}})]),a("ul",[a("li",[t._v("CSS背景图,可以使用"),a("code",[t._v("media")]),t._v("查询判断不同的设备像素比来显示不同精度的图片，示例如下：")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".avatar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conardLi_1x.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" only screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".avatar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conardLi_2x.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" only screen and "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".avatar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conardLi_3x.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("ul",[a("li",[t._v("CSS背景图,还可以使用"),a("code",[t._v("image-set")]),t._v("直接设置多倍图片，示例如下：")])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".avatar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("-webkit-image-set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conardLi_1x.png"')]),t._v(" 1x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conardLi_2x.png"')]),t._v(" 2x "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("img")]),t._v("标签引入的图片,可以通过设置"),a("code",[t._v("srcset")]),t._v("属性，浏览器会自动根据像素密度匹配最佳显示图片，示例如下：")])]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("conardLi_1x.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("srcset")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v(" conardLi_2x.png 2x, conardLi_3x.png 3x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("使用JS根据获取的"),a("code",[t._v("设备像素比")]),t._v(",批量全局替换掉所有图片src，")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dpr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("devicePixelRatio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" images "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelectorAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nimages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n img"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("@")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("dpr"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("x.")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("ul",[a("li",[t._v("最后，如果UI设计支持导出"),a("code",[t._v("SVG")]),t._v("素材，可以使用"),a("code",[t._v("SVG")]),t._v("代替失真图片，"),a("code",[t._v("SVG")]),t._v("全称是可缩放矢量图,属于对图像的形状描述，所以它本质上是文本文件，体积较小，且不管放大多少倍都不会失真。"),a("code",[t._v("SVG")]),t._v("适用于"),a("code",[t._v("img标签")]),t._v("引入和"),a("code",[t._v("CSS")]),t._v("引入，示例如下：")])]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token style"}},[a("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".avatar")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conardLi.svg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("conardLi.svg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("data:image/svg+xml;base64,[data]"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://juejin.im/post/5cddf289f265da038f77696c#heading-45",target:"_blank"}},[t._v("https://juejin.im/post/5cddf289f265da038f77696c#heading-45")])]),a("li",[a("a",{attrs:{href:"https://www.w3cplus.com/CSS/vw-for-layout.html",target:"_blank"}},[t._v("https://www.w3cplus.com/CSS/vw-for-layout.html")])]),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/2050/p/3877280.html",target:"_blank"}},[t._v("https://www.cnblogs.com/2050/p/3877280.html")])])]),t._v(" "),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结","aria-hidden":"true"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("p",[t._v("通过本文的介绍，你应该对移动端H5的适配有了整体的认识，至少能掌握一种完整的解决方案，在实际开发中可以根据每种方案的优劣性做出权衡，也可以针对性的补充自己的优化方案，尽量避开屏幕适配中的坑。")]),a("p",[t._v("文中如有错误或者描述不准确的地方，欢迎批评指正。")])])},[],!1,null,null,null);s.default=e.exports}}]);